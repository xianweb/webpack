<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>WebPack打包 | Gulp</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/webpack/assets/css/6.styles.7b15e196.css" as="style"><link rel="preload" href="/webpack/assets/js/app.c457b371.js" as="script"><link rel="preload" href="/webpack/assets/js/2.a1b53589.js" as="script"><link rel="prefetch" href="/webpack/assets/js/0.525072a5.js"><link rel="prefetch" href="/webpack/assets/js/1.70ff7770.js"><link rel="prefetch" href="/webpack/assets/js/3.781d3618.js"><link rel="prefetch" href="/webpack/assets/js/4.84cba42d.js"><link rel="prefetch" href="/webpack/assets/js/5.c7b20ac1.js">
    <link rel="stylesheet" href="/webpack/assets/css/6.styles.7b15e196.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/webpack/" class="home-link router-link-active"><!----><span class="site-name">
      WebPack打包
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><!----></div></header><div class="sidebar-mask"></div><div class="sidebar"><!----><ul class="sidebar-links"><li><a href="/webpack/page1.html" class="sidebar-link">NodeJS</a></li><li><a href="/webpack/page2.html" class="sidebar-link">Npm</a></li><li><a href="/webpack/page3.html" class="sidebar-link">Yarn</a></li><li><a href="/webpack/page4.html" class="active sidebar-link">Gulp</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/page4.html#什么是gulp？" class="sidebar-link">什么是Gulp？</a></li><li class="sidebar-sub-header"><a href="/webpack/page4.html#gulp安装和使用" class="sidebar-link">Gulp安装和使用</a></li><li class="sidebar-sub-header"><a href="/webpack/page4.html#gulp-api" class="sidebar-link">Gulp API</a></li><li class="sidebar-sub-header"><a href="/webpack/page4.html#gulp-watch-glob-opts-tasks" class="sidebar-link">gulp.watch(glob[, opts], tasks)</a></li><li class="sidebar-sub-header"><a href="/webpack/page4.html#gulp常用插件" class="sidebar-link">gulp常用插件</a></li></ul></li><li><a href="/webpack/page5.html" class="sidebar-link">Webpack</a></li></ul></div><div class="page"><div class="content"><h1 id="gulp"><a href="#gulp" aria-hidden="true" class="header-anchor">#</a> Gulp</h1><h2 id="什么是gulp？"><a href="#什么是gulp？" aria-hidden="true" class="header-anchor">#</a> 什么是Gulp？</h2><p><code>gulp</code>是前端开发过程中对代码进行构建的工具，是<strong>自动化</strong>项目的<strong>构建利器</strong>；她不仅能对网站资源进行优化，而且在开发过程中<strong>很多重复的任务</strong>能够使用正确的工具<strong>自动完成</strong>；使用她，我们不仅可以很愉快的编写代码，而且大大提高我们的工作效率。</p><p><code>gulp</code>是基于<code>Nodejs</code>的自动任务运行器， 她能自动化地完成 <code>javascript/coffee/sass/less/html/image/css</code> 等文件的的<strong>测试</strong>、<strong>检查</strong>、<strong>合并</strong>、<strong>压缩</strong>、<strong>格式化</strong>、<strong>浏览器自动刷新</strong>、<strong>部署文件生成</strong>，<strong>并监听文件在改动后重复指定的这些步骤</strong>。在实现上，她借鉴了Unix操作系统的管道（<strong>pipe</strong>）思想，前一级的输出，直接变成后一级的输入。</p><h2 id="gulp安装和使用"><a href="#gulp安装和使用" aria-hidden="true" class="header-anchor">#</a> Gulp安装和使用</h2><p>全局安装 gulp：</p><pre class="language-text"><code>$ npm install --global gulp
</code></pre><p>作为项目的开发依赖（devDependencies）安装：</p><pre class="language-text"><code>$ npm install --save-dev gulp
</code></pre><div class="danger custom-block"><p class="custom-block-title">提示</p><p>实际开发过程中要同时全局和局部安装。</p></div><p>在项目根目录下创建一个名为 <code>gulpfile.js</code> 的文件：</p><pre class="language-js"><code><span class="token keyword">var</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 将你的默认的任务代码放在这</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>运行 gulp：</p><pre class="language-text"><code>$ gulp
</code></pre><p>默认的名为 <code>default</code> 的任务（task）将会被运行，在这里，这个任务并未做任何事情。</p><p>想要单独执行特定的任务（task），请输入 gulp <code>&lt;task&gt;</code><code>&lt;othertask&gt;</code>。</p><pre class="language-text"><code>$ gulp renwu1  renwu2
</code></pre><h2 id="gulp-api"><a href="#gulp-api" aria-hidden="true" class="header-anchor">#</a> Gulp API</h2><h3 id="gulp-src-globs-options"><a href="#gulp-src-globs-options" aria-hidden="true" class="header-anchor">#</a> gulp.src(globs[, options])</h3><p>输出符合所提供的匹配模式（glob）或者匹配模式的数组（array of globs）的文件。 将返回一个（stream），它可以被 piped（管道） 到别的插件中。</p><pre class="language-js"><code>gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'client/*.jade'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">jade</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">minify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'build/mini'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3 id="gulp-dest-path-options"><a href="#gulp-dest-path-options" aria-hidden="true" class="header-anchor">#</a> gulp.dest(path[, options])</h3><p>能被 pipe 进来，并且将会写文件。并且重新输出所有数据，因此你可以将它 pipe 到多个文件夹。如果某文件夹不存在，将会自动创建它。</p><pre class="language-js"><code>gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'client/*.jade'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">jade</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">minify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'build/mini'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="tip custom-block"><p class="custom-block-title">提示</p><p>dest 可以理解为导出经过处理后的文件</p></div><h3 id="gulp-task-name-deps-fn"><a href="#gulp-task-name-deps-fn" aria-hidden="true" class="header-anchor">#</a> gulp.task(name[, deps], fn)</h3><pre class="language-js"><code><span class="token comment">//定义一个任务</span>
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'somename'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 做一些事</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>一个包含任务列表的数组，这些任务会在你当前任务运行之前完成。</p><pre class="language-js"><code>gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'mytask'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'array'</span><span class="token punctuation">,</span> <span class="token string">'of'</span><span class="token punctuation">,</span> <span class="token string">'task'</span><span class="token punctuation">,</span> <span class="token string">'names'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 做一些事</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="danger custom-block"><p class="custom-block-title">提示</p><p>注意： 默认的，task 将以最大的并发数执行，也就是说，gulp 会一次性运行所有的 task 并且不做任何等待。如果你想要创建一个序列化的 task 队列，并以特定的顺序执行，你需要做两件事：</p><ul><li>给出一个提示，来告知 task 什么时候执行完毕。</li><li>并且再给出一个提示，来告知一个 task 依赖另一个 task 的完成。</li></ul></div><p>请看下面的例子：</p><pre class="language-js"><code><span class="token keyword">var</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 返回一个 callback，因此系统可以知道它什么时候完成</span>
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 做一些事 -- 异步的或者其他的</span>
    <span class="token function">cb</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 如果 err 不是 null 或 undefined，则会停止执行，且注意，这样代表执行失败了</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 定义一个所依赖的 task 必须在这个 task 执行之前完成</span>
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'two'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'one'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 'one' 完成后</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2 id="gulp-watch-glob-opts-tasks"><a href="#gulp-watch-glob-opts-tasks" aria-hidden="true" class="header-anchor">#</a> gulp.watch(glob[, opts], tasks)</h2><p>需要在文件变动后执行的一个或者多个通过 <code>gulp.task()</code> 创建的 task（任务） 的名字。</p><pre class="language-js"><code><span class="token keyword">var</span> watcher <span class="token operator">=</span> gulp<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span><span class="token string">'js/**/*.js'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'uglify'</span><span class="token punctuation">,</span><span class="token string">'reload'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
watcher<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'File '</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>path <span class="token operator">+</span> <span class="token string">' was '</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>type <span class="token operator">+</span> <span class="token string">', running tasks...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><pre class="language-js"><code><span class="token comment">//表示引进gulp模块,node_modules有安装</span>
<span class="token keyword">const</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> sass <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp-sass'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'sass'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'./theme/index.scss'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">sass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'./theme/lib'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//触发上面定义的任务</span>
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'watch'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    gulp<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span><span class="token string">'./theme/**/*.scss'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'sass'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><h2 id="gulp常用插件"><a href="#gulp常用插件" aria-hidden="true" class="header-anchor">#</a> gulp常用插件</h2><ul><li><code>gulp-less</code> less编译</li><li><code>gulp-clean-css</code> css压缩</li><li><code>gulp-uglify</code> js压缩</li><li><code>gulp-imagemin</code> 图片压缩</li><li><code>gulp-sourcemaps</code> 生成sourcemap文件</li><li><code>gulp-clean</code> 文件清除</li><li><code>gulp-rename</code> 重命名文件</li><li><code>gulp-concat</code> 合并文件</li><li><code>gulp-csso</code> 压缩优化css</li><li><code>gulp-html-minify</code> 压缩HTML</li><li><code>gulp-zip</code> ZIP压缩文件</li><li><code>gulp-autoprefixer</code> 自动为css添加浏览器前缀</li><li><code>gulp-sass</code> 编译sass</li><li><code>gulp-babel</code> 将ES6代码编译成ES5</li></ul></div><!----><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/webpack/page3.html" class="prev">
          Yarn
        </a></span><span class="next"><a href="/webpack/page5.html">
          Webpack
        </a> →
      </span></p></div></div></div></div>
    <script src="/webpack/assets/js/2.a1b53589.js" defer></script><script src="/webpack/assets/js/app.c457b371.js" defer></script>
  </body>
</html>
